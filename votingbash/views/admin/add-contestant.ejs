<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add Contestant</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
    />
    <style>
      body {
        background-color: #f8f9fa;
      }
      .container {
        margin-top: 40px;
      }
      h4 {
        color: #343a40;
      }
      .form-group label {
        font-weight: bold;
      }
      .btn-primary {
        background-color: #343a40;
        border-color: #343a40;
      }
      .btn-primary:hover {
        background-color: #495057;
        border-color: #495057;
      }
      .btn-primary:focus,
      .btn-primary.focus {
        background-color: #495057;
        border-color: #495057;
        box-shadow: 0 0 0 0.2rem rgba(0, 0, 0, 0.5);
      }
      #addContestantForm {
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
      }
      select.form-control {
        cursor: pointer;
      }
      .alert {
        margin-top: 1rem;
        display: none;
      }
    </style>
  </head>

  <body>
    <div class="container mt-4">
      <div class="row">
        <!-- Award Titles Dropdown -->
        <div class="col-md-6 offset-md-3" data-aos="fade-up">
          <h4>Select Award Title</h4>
          <div class="form-group">
            <%- include('header') %>
            <label for="awardTitle">Award Title:</label>
            <select
              class="form-control"
              id="awardTitle"
              name="awardTitle"
              required
              onchange="showContestantForm(this.value)"
            >
              <option value="">Select an award...</option>
              <% awards.forEach(award => { %>
              <option value="<%= award.id %>"><%= award.title %></option>
              <% }); %>
            </select>
          </div>
        </div>

        <!-- Add Contestant Form (Initially Hidden) -->
        <div
          class="col-md-6 offset-md-3 mt-4"
          id="addContestantForm"
          style="display: none"
          data-aos="fade-up"
        >
          <h4>Add Contestant</h4>
          <form
            action="/admin/add-contestant"
            method="post"
            enctype="multipart/form-data"
            onsubmit="return confirm('Are you sure you want to add this contestant?');"
          >
            <!-- Hidden Field to Store Selected Award ID -->
            <input type="hidden" id="selectedAwardId" name="selectedAwardId" />

            <div class="form-group">
              <label for="contestantName">Contestant Name:</label>
              <input
                type="text"
                class="form-control"
                id="contestantName"
                name="contestantName"
                required
              />
            </div>
            <div class="form-group">
              <label for="contestantLevel">Contestant Level:</label>
              <select
                class="form-control"
                id="contestantLevel"
                name="contestantLevel"
                required
              >
                <option value="100">100</option>
                <option value="200">200</option>
                <option value="300">300</option>
                <option value="400">400</option>
              </select>
            </div>
            <div class="form-group">
              <label for="contestantPhoto">Contestant Photo:</label>
              <input
                type="file"
                class="form-control-file"
                id="contestantPhoto"
                name="contestantPhoto"
                accept="image/*"
                required
              />
            </div>
            <button type="submit" class="btn btn-primary">Upload</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Include Bootstrap JS, Popper.js, and AOS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
      AOS.init();

      // Function to show contestant form and set the selected award
      function showContestantForm(awardId) {
        if (!awardId) {
          document.getElementById("addContestantForm").style.display = "none";
          return;
        }
        // Set the selected award ID in the hidden field
        document.getElementById("selectedAwardId").value = awardId;
        // Show the add contestant form with a smooth transition
        const formDiv = document.getElementById("addContestantForm");
        formDiv.style.display = "block";
        formDiv.style.opacity = "0";
        setTimeout(() => {
          formDiv.style.opacity = "1";
          formDiv.style.transition = "opacity 0.3s ease-in-out";
        }, 10);
      }
    </script>
  </body>
</html>
